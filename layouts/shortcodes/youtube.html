{{/* layouts/shortcodes/youtube.html - click-to-load */}}

{{ $raw := "" }}
{{ if .IsNamedParams }}
  {{ $raw = (.Get "url") | default (.Get "id") | default "" }}
{{ else }}
  {{ $raw = (.Get 0) | default "" }}
{{ end }}

{{ $title := (.Get "title") | default "Play on YouTube" }}
{{ $id := $raw }}

{{ if (or (in $raw "youtu.be/") (in $raw "youtube.com/")) }}
  {{ $m := findRE `(?:youtu\.be/|v=|/shorts/|/embed/)([A-Za-z0-9_-]{6,})` $raw }}
  {{ if gt (len $m) 0 }}
    {{ $id = replaceRE `.*(?:youtu\.be/|v=|/shorts/|/embed/)([A-Za-z0-9_-]{6,}).*` `$1` (index $m 0) }}
  {{ end }}
{{ end }}

<div class="bb-youtube-lite"
     data-youtube-id="{{ $id }}"
     role="button"
     tabindex="0"
     aria-label="{{ $title }}"
     style="cursor:pointer;border:1px solid rgba(0,0,0,.15);padding:.75rem;border-radius:.75rem;max-width:700px;">
  ▶ {{ $title }}
</div>
