{{- $pc := .Page.Site.Config.Privacy.YouTube -}}
{{- if not $pc.Disable -}}
{{- $ytId := .Get "id" | default (.Get 0) -}}

<div class="youtube-player" data-id="{{ $ytId }}">
  <img src="https://img.youtube.com/vi/{{ $ytId }}/hqdefault.jpg" alt="Video thumbnail" loading="lazy">
  <div class="play-btn"></div>
</div>

<style>
.youtube-player {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%;
  background: #000;
  cursor: pointer;
  margin-bottom: 20px;
  border-radius: 8px;
  overflow: hidden;
}
.youtube-player img {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  opacity: 0.9;
  transition: opacity 0.3s;
}
.youtube-player:hover img { opacity: 1; }
.play-btn {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 68px; height: 48px;
  background: #f00;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.play-btn::after {
  content: '';
  width: 0; height: 0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
  border-left: 16px solid white;
}
.youtube-player:hover .play-btn { background: #c00; }
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll('.youtube-player').forEach(function(player) {
    player.addEventListener('click', function() {
      var iframe = document.createElement('iframe');
      iframe.src = 'https://www.youtube.com/embed/' + this.dataset.id + '?autoplay=1&rel=0';
      iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
      iframe.setAttribute('allowfullscreen', '');
      iframe.style.cssText = 'position:absolute;top:0;left:0;width:100%;height:100%;border:0;';
      this.innerHTML = '';
      this.appendChild(iframe);
    });
  });
});
</script>
{{- end -}}
